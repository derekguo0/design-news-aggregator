# 🚨 刷新功能失效应急诊断指南

## 📋 快速检查清单

### 1. 浏览器层面
- [ ] 强制刷新页面：Ctrl+Shift+R (Windows) 或 Cmd+Shift+R (Mac)
- [ ] 清除浏览器缓存：设置 → 隐私和安全 → 清除浏览数据
- [ ] 尝试无痕模式：Ctrl+Shift+N (Windows) 或 Cmd+Shift+N (Mac)
- [ ] 尝试不同浏览器：Chrome、Firefox、Edge

### 2. 网络层面
- [ ] 检查网络连接是否稳定
- [ ] 关闭VPN/代理后重试
- [ ] 尝试移动热点网络
- [ ] 检查是否有网络限制

### 3. 系统诊断
访问：`https://design-newdrip.vercel.app/api/debug`

**期望看到的正常状态：**
```json
{
  "environment": {
    "GITHUB_TOKEN": "Configured",
    "VERCEL": "1"
  },
  "deployment_detection": {
    "is_vercel": true,
    "has_github_token": true
  }
}
```

**如果看到异常：**
- `"GITHUB_TOKEN": "Not configured"` → Token配置问题
- `"is_vercel": false` → 环境检测问题
- API无法访问 → 部署问题

### 4. 控制台错误检查
1. 按F12打开开发者工具
2. 点击Console标签
3. 点击刷新按钮
4. 查看是否有红色错误信息

**常见错误类型：**
- `Failed to fetch` → 网络连接问题
- `404 Not Found` → API路径问题
- `500 Internal Server Error` → 服务器错误
- `CORS error` → 跨域问题

## 🔧 应急解决方案

### 方案1：手动触发GitHub Actions
1. 访问：https://github.com/derekguo0/design-news-aggregator/actions
2. 点击"Auto Deploy to Vercel"工作流
3. 点击"Run workflow"按钮
4. 选择main分支并运行
5. 等待2-3分钟后检查网站

### 方案2：Vercel手动重新部署
1. 登录Vercel控制台
2. 进入项目页面
3. 点击"Deployments"标签
4. 找到最新部署，点击"Redeploy"

### 方案3：本地生成内容
如果线上功能完全不可用：
```bash
cd /path/to/推送机器人
python3 simple_run.py
git add .
git commit -m "手动生成最新内容"
git push origin main
```

## 📞 问题上报格式

如果问题持续存在，请提供以下信息：

1. **具体症状**：点击按钮后的具体表现
2. **调试API返回**：`/api/debug`的完整JSON内容
3. **控制台错误**：F12控制台中的错误信息
4. **环境信息**：
   - 浏览器类型和版本
   - 操作系统
   - 网络环境（家庭/公司/移动网络）
5. **时间信息**：问题发生的具体时间

## 🎯 预防措施

为避免类似问题再次发生：

1. **设置自动备份**：每日定时运行GitHub Actions
2. **监控告警**：配置Vercel部署失败通知
3. **多环境验证**：在不同浏览器中测试功能
4. **定期检查**：每周查看一次调试API状态

## 📊 问题分类

根据症状快速分类：

| 症状 | 可能原因 | 优先解决方案 |
|------|----------|--------------|
| 按钮无反应 | 浏览器缓存 | 强制刷新+清除缓存 |
| 有进度条但失败 | API配置问题 | 检查调试API |
| 显示手动触发 | Token未配置 | 配置GITHUB_TOKEN |
| 网络错误 | 连接问题 | 检查网络+重试 |
| 502/503错误 | 服务器问题 | Vercel重新部署 |

记住：现在有了完善的诊断工具，我们可以快速定位和解决问题！
